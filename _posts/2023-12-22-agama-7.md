--
layout: post
date: 2023-12-22 09:00:00 +00:00
title: Announcing Agama 7
description: Year 2023 comes to an end with a new version of our next-generation installer
permalink: blog/2023-12-22/agama7
tags:
- Project
- Programming
- Systems Management
- YaST
- Agama
---

It's vacation season at Europe and most of the YaST development team will be busy for a couple of
weeks singing Chistmas songs, celebrating the arrival of a new year and opening presents from the
Three Wise Men. But we didn't want to leave the openSUSE fans idle for so long. So we decided to
release another prototype of Agama, so you can have fun testing it and giving us feedback.

Meet Agama 7 and its corresponding [Agama Live ISO
images](https://download.opensuse.org/repositories/systemsmanagement:/Agama:/Devel/images/iso/) for
testing.

## Localization Settings for the Target System {#l10n}

One of the biggest changes compared to previous versions is the possibility to fully configure all
the localization aspects of the target system to be installed. That includes the language, the
keyboard layout and the time zone.

{% include blog_img.md alt="Localization" src="l10n-mini.png" full_img="l10n.png" %}

Note these aspects don't affect the Agama interface. The language used by Agama during the
installation process is determined by the browser, although it can be changed through the Agama
sidebar as already explained [in our previous blog post]({{site.baseurl}}/blog/2023-10-25/agama5).

## Keyboard Selector for Local Installation {#keyboard}

But what happens when the browser you are using to connect to Agama is not in a remote machine
properly configured but is the full-screen browser offered by the Agama Live testing image? Don't
worry, your localization needs are also covered.

As you can see in the description of [this pull request](https://github.com/openSUSE/agama/pull/917),
the Agama sidebar can also be used to change the keyboard layout if the browser is running in the
same system that is executing Agama, like is the case of Agama Live.

We plan to create a proper welcome screen for users that don't know enough English to reach that
sidebar, but meanwhile we hope the current options will be enough both to use Agama in your
preferred language and to get a properly localized system as result of the installation.

## Reduce RAM Usage in the Testing Image {#zram}

Talking about the Agama Live testing image, we recently reduced the amount of RAM it requires to
succesfully install openSUSE. In fact, Agama's memory usage has not changed much, but we enabled
[zram](https://en.wikipedia.org/wiki/Zram) by default in the live image and now everything should
work better in systems with limited amount of RAM. If you want to disable zram, just open a terminal
and execute the following command.

```
systemctl stop zramswap
```

To be honest, we cannot foresee any good reason to disable zram, so let's us know if you think we are
mistaken in that regard.

## Installation of openSUSE MicroOS {#microos}

We also reorganized the Agama configuration included in the openSUSE flavor of Agama Live. Now you
can use the very same testing image to install both openSUSE Tumbleweed and openSUSE MicroOS.

{% include blog_img.md alt="Product Selection" src="product-mini.png" full_img="product.png" %}

## First Step to Simplify Selection of Software {#patterns}

In Agama 5 we introduced a software patterns selector to allow the user to customize, to some
extent, which software to install. It was just a prototype but it unveiled some troubles:

* There are way too many patterns and it is easy to get lost.
* As some products share the same repositories (i.e., Tumbleweed and MicroOS), you might end up
  mixing patterns from both products.

In order to mitigate those problems, we decided to display a curated list of patterns for each
product. However, the current implementation is still a prototype, as we plan to add refine the
approach and add more features, like proper conflict handling.

## Registration Support {#registration}

As you may know, some SUSE products are expected to be registered in the SUSE Customer Center using
a product key. However, Agama had zero support for that use case until now. It is noteworthy to
mention that this feature is available in the web user interface and in the unattended installation.
So if you have a product key, feel free to give it a try.

## More Customization Options {#storage}

The storage area got its share of regular enhancements too. The first obvious improvememnt is that
you can tell Agama how to make space to install the system. Do you want to remove the current
content and use the whole disk? Or do you prefer to shrink existing partitions to make space? Or
would you like to use only the available space? We expect these options to cover most of the use
cases, although we plan to add support for a more fine-grained approach in the future.

Another important change in the storage area is allowing the user to select the file system for each
mount point. It includes to enable or disable snapshots if you want to use Btrfs.

## Network Bonding {#bond}

The network configuration is one of the areas we want to focus in the short-term. Until now, Agama
only supports simple use cases over wired and wireless devices. However, we are aware that it is
rather limited if you plan to use some network-based storage device to install the system (e.g.,
`iSCSI`).

For that reason, in close collaboration with our network experts at SUSE, we are adding support for
more scenarios. In this release, you can set up a bonding connection, although this feature is
limited by now to the unattended installation case. The example below shows how to define the
connection.

```
{
  id: "Bonding Connection 1",
  interface: "bond",
  bond: {
      ports: ["eth0", "eth1"],
      mode: "active-backup",
      options: "primary=eth1"

  }
}
```

## Other Improvements {#other}

* Preserve the installation logs for easier error reporting and debugging.
* Make possible to translate the messages in the installation progress screen. Our awesome team of
translators is already working on them.
* Several accessibility improvements in the web user interface by adding `aria-label`,
`aria-live-region` and `aria-busy` attributes where needed.

## The Year of Agama {#future}

Agama 7 is the first prototype we could consider to be "functional enough". It finally covers all the
areas we consider as essencial during the installation of the system: localization, network
configuration, storage setup, authentication basis (including the optional creation of a first user)
and an intentionally simplistic selection of the software to install.

Of course, all those areas need to evolve much further and that's exactly the goal for this new
year - take Agama to the next level in which it could even replace YaST for some scenarios and
distributions.

Your contributions and opinions are an important element for that. So don't hesitate to contact
the YaST team at the [YaST Development mailing
list](https://lists.opensuse.org/archives/list/yast-devel@lists.opensuse.org/), our `#yast`
channel at [Libera.chat](https://libera.chat/) or the [Agama project at
GitHub](https://github.com/openSUSE/agama).

See you again in 2024!
